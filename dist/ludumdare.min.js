!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.ludumdare=t()}}(function(){return function t(e,i,a){function o(n,r){if(!i[n]){if(!e[n]){var h="function"==typeof require&&require;if(!r&&h)return h(n,!0);if(s)return s(n,!0);var l=new Error("Cannot find module '"+n+"'");throw l.code="MODULE_NOT_FOUND",l}var c=i[n]={exports:{}};e[n][0].call(c.exports,function(t){var i=e[n][1][t];return o(i?i:t)},c,c.exports,t,e,i,a)}return i[n].exports}for(var s="function"==typeof require&&require,n=0;n<a.length;n++)o(a[n]);return o}({1:[function(t,e,i){"use strict";var a=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},o=!1,s=function(t){function e(e,i,a,s,n,r){t.call(this,e,i,a,s),this.radius=n,e.physics.p2.enable(this,o);var h=this.body;h.collideWorldBounds=!0,h.setCircle(n),h.mass=20,h.setCollisionGroup(r.catCollisionGroup),h.collides(r.catCollidesWith)}return a(e,t),e.prototype.getLegAttachPoint=function(){return[0,0]},e.prototype.getTailAttachPoint=function(t){return void 0===t&&(t=!1),t?[3*-this.radius/4,0]:[3*this.radius/4,0]},e.prototype.getHeadAttachPoint=function(t){return void 0===t&&(t=!1),t?[this.radius,0]:[-this.radius,0]},e}(Phaser.Sprite);i.CatBodyPart=s;var n=function(){function t(t,e,i,a,n){this.RADIUS=40,this.SEPERATION=35,this.MAX_FORCE=1e5,this.chest=new s(t,a,n,o?"":e.catName+"cat_chest",this.RADIUS,i),this.belly=new s(t,a+this.SEPERATION,n,o?"":e.catName+"cat_belly",this.RADIUS,i),this.butt=new s(t,a+2*this.SEPERATION,n,o?"":e.catName+"cat_butt",this.RADIUS,i);var r=[this.chest,this.belly,this.butt];e.getSpriteGroup().add(this.chest),e.getSpriteGroup().add(this.belly),e.getSpriteGroup().add(this.butt);for(var h=1;h<r.length;h++){var l=t.physics.p2.createRevoluteConstraint(r[h],[-this.SEPERATION/2,0],r[h-1],[this.SEPERATION/2,0],this.MAX_FORCE);l.setLimits(-Math.PI/6,Math.PI/6)}}return t.prototype.loadCat=function(t){this.chest.loadTexture(t+"cat_chest"),this.belly.loadTexture(t+"cat_belly"),this.butt.loadTexture(t+"cat_butt")},t.prototype.setZIndex=function(t){this.chest.z=t,this.belly.z=t,this.butt.z=t},t}();i.CatBody=n},{}],2:[function(t,e,i){"use strict";var a=function(){function t(t){this.CAT_SPRITES={brown:{cat_head:"brown-head.png",cat_belly:"brown-belly.png",cat_chest:"brown-chest.png",cat_butt:"brown-butt.png",cat_tail_0:"brown-tail-medium.png",cat_tail_1:"brown-tail-medium.png",cat_tail_2:"brown-tail-large.png",cat_tail_3:"brown-tail-large.png",cat_tail_4:"brown-tail-medium.png",cat_tail_5:"brown-tail-medium.png",cat_tail_6:"brown-tail-small.png",cat_tail_7:"brown-tail-end.png",cat_left_back_foot:"brown-left-back-foot.png",cat_left_back_shin:"brown-left-back-shin.png",cat_left_back_thigh:"brown-left-back-thigh.png",cat_left_back_toe:"brown-left-back-toe.png",cat_right_back_foot:"brown-right-back-foot.png",cat_right_back_shin:"brown-right-back-shin.png",cat_right_back_thigh:"brown-right-back-thigh.png",cat_right_back_toe:"brown-right-back-toe.png",cat_left_front_shin:"brown-left-front-shin.png",cat_left_front_thigh:"brown-left-front-thigh.png",cat_left_front_toe:"brown-left-front-toe.png",cat_right_front_shin:"brown-right-front-shin.png",cat_right_front_thigh:"brown-right-front-thigh.png",cat_right_front_toe:"brown-right-front-toe.png"},orange:{cat_head:"orange-head.png",cat_belly:"orange-belly.png",cat_chest:"orange-chest.png",cat_butt:"orange-butt.png",cat_tail_0:"orange-tail-medium-dark.png",cat_tail_1:"orange-tail-medium-light.png",cat_tail_2:"orange-tail-large-dark.png",cat_tail_3:"orange-tail-large-light.png",cat_tail_4:"orange-tail-medium-dark.png",cat_tail_5:"orange-tail-medium-light.png",cat_tail_6:"orange-tail-medium-dark.png",cat_tail_7:"orange-tail-end.png",cat_left_back_foot:"orange-left-back-foot.png",cat_left_back_shin:"orange-left-back-shin.png",cat_left_back_thigh:"orange-left-back-thigh.png",cat_left_back_toe:"orange-back-toe.png",cat_right_back_foot:"orange-right-back-foot.png",cat_right_back_shin:"orange-right-back-shin.png",cat_right_back_thigh:"orange-right-back-thigh.png",cat_right_back_toe:"orange-back-toe.png",cat_left_front_shin:"orange-left-front-shin.png",cat_left_front_thigh:"orange-left-front-thigh.png",cat_left_front_toe:"orange-front-toe.png",cat_right_front_shin:"orange-right-front-shin.png",cat_right_front_thigh:"orange-right-front-thigh.png",cat_right_front_toe:"orange-front-toe.png"},fat:{cat_head:"fat-head.png",cat_belly:"fat-belly.png",cat_chest:"fat-chest.png",cat_butt:"fat-butt.png",cat_tail_0:"fat-tail-medium.png",cat_tail_1:"fat-tail-medium.png",cat_tail_2:"fat-tail-large.png",cat_tail_3:"fat-tail-large.png",cat_tail_4:"fat-tail-medium.png",cat_tail_5:"fat-tail-medium.png",cat_tail_6:"fat-tail-medium.png",cat_tail_7:"fat-tail-end.png",cat_left_back_foot:"fat-left-back-foot.png",cat_left_back_shin:"fat-left-back-shin.png",cat_left_back_thigh:"fat-left-back-thigh.png",cat_left_back_toe:"fat-left-toe.png",cat_right_back_foot:"fat-right-back-foot.png",cat_right_back_shin:"fat-right-back-shin.png",cat_right_back_thigh:"fat-right-back-thigh.png",cat_right_back_toe:"fat-right-toe.png",cat_left_front_shin:"fat-left-front-shin.png",cat_left_front_thigh:"fat-left-front-thigh.png",cat_left_front_toe:"fat-left-toe.png",cat_right_front_shin:"fat-right-front-shin.png",cat_right_front_thigh:"fat-right-front-thigh.png",cat_right_front_toe:"fat-right-toe.png"},calico:{cat_head:"calico-head.png",cat_belly:"calico-belly.png",cat_chest:"calico-chest.png",cat_butt:"calico-butt.png",cat_tail_0:"calico-tail-medium-light.png",cat_tail_1:"calico-tail-medium-light.png",cat_tail_2:"calico-tail-large.png",cat_tail_3:"calico-tail-large.png",cat_tail_4:"calico-tail-medium-dark.png",cat_tail_5:"calico-tail-medium-dark.png",cat_tail_6:"calico-tail-small.png",cat_tail_7:"calico-tail-end.png",cat_left_back_foot:"calico-left-back-foot.png",cat_left_back_shin:"calico-left-back-shin.png",cat_left_back_thigh:"calico-left-back-thigh.png",cat_left_back_toe:"calico-left-paw.png",cat_right_back_foot:"calico-right-back-foot.png",cat_right_back_shin:"calico-right-back-shin.png",cat_right_back_thigh:"calico-right-back-thigh.png",cat_right_back_toe:"calico-right-paw.png",cat_left_front_shin:"calico-left-front-shin.png",cat_left_front_thigh:"calico-left-front-thigh.png",cat_left_front_toe:"calico-left-paw.png",cat_right_front_shin:"calico-right-front-shin.png",cat_right_front_thigh:"calico-right-front-thigh.png",cat_right_front_toe:"calico-right-paw.png"},black:{cat_head:"black-head.png",cat_belly:"black-belly.png",cat_chest:"black-chest.png",cat_butt:"black-butt.png",cat_tail_0:"black-tail-medium.png",cat_tail_1:"black-tail-medium.png",cat_tail_2:"black-tail-large.png",cat_tail_3:"black-tail-large.png",cat_tail_4:"black-tail-medium.png",cat_tail_5:"black-tail-medium.png",cat_tail_6:"black-tail-small.png",cat_tail_7:"black-tail-end.png",cat_left_back_foot:"black-left-back-foot.png",cat_left_back_shin:"black-left-back-shin.png",cat_left_back_thigh:"black-left-back-thigh.png",cat_left_back_toe:"black-left-paw.png",cat_right_back_foot:"black-right-back-foot.png",cat_right_back_shin:"black-right-back-shin.png",cat_right_back_thigh:"black-right-back-thigh.png",cat_right_back_toe:"black-right-paw.png",cat_left_front_shin:"black-left-front-shin.png",cat_left_front_thigh:"black-left-front-thigh.png",cat_left_front_toe:"black-left-paw.png",cat_right_front_shin:"black-right-front-shin.png",cat_right_front_thigh:"black-right-front-thigh.png",cat_right_front_toe:"black-right-paw.png"},hairless:{cat_head:"hairless-head.png",cat_belly:"hairless-belly.png",cat_chest:"hairless-chest.png",cat_butt:"hairless-butt.png",cat_tail_0:"hairless-tail-0.png",cat_tail_1:"hairless-tail-1.png",cat_tail_2:"hairless-tail-2.png",cat_tail_3:"hairless-tail-3.png",cat_tail_4:"hairless-tail-4.png",cat_tail_5:"hairless-tail-5.png",cat_tail_6:"hairless-tail-6.png",cat_tail_7:"hairless-tail-7.png",cat_left_back_foot:"hairless-left-back-foot.png",cat_left_back_shin:"hairless-left-back-shin.png",cat_left_back_thigh:"hairless-left-back-thigh.png",cat_left_back_toe:"hairless-left-paw.png",cat_right_back_foot:"hairless-right-back-foot.png",cat_right_back_shin:"hairless-right-back-shin.png",cat_right_back_thigh:"hairless-right-back-thigh.png",cat_right_back_toe:"hairless-right-paw.png",cat_left_front_shin:"hairless-left-front-shin.png",cat_left_front_thigh:"hairless-left-front-thigh.png",cat_left_front_toe:"hairless-left-paw.png",cat_right_front_shin:"hairless-right-front-shin.png",cat_right_front_thigh:"hairless-right-front-thigh.png",cat_right_front_toe:"hairless-right-paw.png"}},this.game=t}return t.prototype.loadSpritesForCat=function(t){var e=this.CAT_SPRITES[t];for(var i in e)e.hasOwnProperty(i)&&this.game.load.image(t+"/"+i,"cat-parts/"+e[i])},t}();i.CatSpriteManager=a},{}],3:[function(t,e,i){"use strict";var a=function(){function t(t){this.catCollisionGroup=t.physics.p2.createCollisionGroup(),this.wallsCollisionGroup=t.physics.p2.createCollisionGroup(),this.pawCollisionGroup=t.physics.p2.createCollisionGroup(),this.sensorCollisionGroup=t.physics.p2.createCollisionGroup(),this.fishCollisionGroup=t.physics.p2.createCollisionGroup(),this.treatCollisionGroup=t.physics.p2.createCollisionGroup(),this.elementsCollisionGroup=t.physics.p2.createCollisionGroup(),this.catCollidesWith=[this.wallsCollisionGroup,this.treatCollisionGroup,this.sensorCollisionGroup,this.fishCollisionGroup,this.elementsCollisionGroup]}return t}();i.CollisionManager=a},{}],4:[function(t,e,i){"use strict";var a=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},o=!1,s=function(t){function e(e,i,a,s,n){t.call(this,e,i,a,s),this.z=20,this.game.physics.p2.enable(this,o);var r=this.body,h=n.collisionManager;r.clearShapes(),r.loadPolygon("physics",s),r["static"]=!0,r.setCollisionGroup(h.elementsCollisionGroup),r.collides([h.catCollisionGroup,h.treatCollisionGroup],function(){},this)}return a(e,t),e}(Phaser.Sprite);i.Element=s},{}],5:[function(t,e,i){"use strict";var a=function(){function t(t,e,i,a,o,s,n){this.time=0,this.bobRate=1.5*Math.PI,this.bobAmplitude=2,this.onEaten=new Phaser.Signal,this.game=t,this.myCollisions=e,this.xFrom=i,this.yFrom=a,this.xTo=o,this.yTo=s,this.speed=n,this.sprite=this.game.add.sprite(this.xFrom,this.yFrom,"fishy"),this.game.physics.p2.enable(this.sprite,!1),this.sprite.body.setCollisionGroup(this.myCollisions.fishCollisionGroup),this.sprite.body.collides(this.myCollisions.catCollisionGroup,this.touchy,this),this.sprite.body.kinematic=!0,this.game.time.events.loop(Phaser.Timer.SECOND*(1/30),this.update,this);var r=this.xTo-this.xFrom,h=this.yTo-this.yFrom,l=Math.sqrt(r*r+h*h);if(r/=l,h/=l,this.sprite.body.velocity.x=r*n,this.sprite.body.velocity.y=h*n,this.xTo<this.xFrom){var c=this.xFrom,g=this.yFrom;this.xFrom=this.xTo,this.yFrom=this.yTo,this.xTo=c,this.yFrom=g}else this.sprite.scale.x*=-1}return t.prototype.touchy=function(t,e,i,a){e.sprite.key.indexOf("cat_head")>=0&&(this.onEaten.dispatch(),this.sprite.destroy(),this.sprite=null)},t.prototype.update=function(){var t=1/30;null!=this.sprite&&((this.sprite.body.x>this.xTo||this.sprite.body.x<this.xFrom-10)&&(this.sprite.scale.x*=-1,this.sprite.body.velocity.x*=-1,this.sprite.body.velocity.y*=-1),this.time+=t,this.sprite.body.y+=Math.sin(this.time*this.bobRate)*this.bobAmplitude)},t}();i.Fishy=a},{}],6:[function(t,e,i){"use strict";var a=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},o=function(t){function e(e,i,a,o,s){t.call(this,e,i,a,o),this.z=30;var n=s.getZone(o);n.onCatEntered.add(function(){this.setTransparent(!0)},this),n.onCatLeft.add(function(){this.setTransparent(!1)},this)}return a(e,t),e.prototype.setTransparent=function(t){this.alpha=t?.4:1},e}(Phaser.Sprite);i.ForegroundElement=o},{}],7:[function(t,e,i){"use strict";var a=function(){function t(t){this.rootGroup=t.add.group(void 0,"root",!1),this.catGroup=t.add.group(this.rootGroup,"cat",!1),this.elementGroup=t.add.group(this.rootGroup,"element",!1)}return t.prototype.getAllGroups=function(){return[this.rootGroup,this.catGroup,this.elementGroup]},t}();i.GroupManager=a},{}],8:[function(t,e,i){"use strict";var a=!1,o=function(){function t(t,e,i,o,s){this.HEAD_MASS=10,this.MAX_FORCE=2e4,i+=s.getHeadAttachPoint()[0],o+=s.getHeadAttachPoint()[1],this.headSprite=new Phaser.Sprite(t,i,o,e.catName+"cat_head",1),t.physics.p2.enable(this.headSprite,a);var n=this.headSprite.body;n.clearShapes(),n.loadPolygon("physics","cat-head"),e.getSpriteGroup().add(this.headSprite),this.headSprite.body.mass=this.HEAD_MASS;var r=t.physics.p2.createRevoluteConstraint(this.headSprite,[0,0],s,s.getHeadAttachPoint(),this.MAX_FORCE);r.setLimits(-Math.PI/4,Math.PI/4)}return t.prototype.loadCat=function(t){this.headSprite.loadTexture(t+"cat_head")},t.prototype.setZIndex=function(t){this.headSprite.z=t},t.prototype.setCollisionGroup=function(t){this.headSprite.body.setCollisionGroup(t)},t.prototype.collides=function(t){this.headSprite.body.collides(t)},t}();i.CatHead=o},{}],9:[function(t,e,i){"use strict";var a=t("./paw"),o=!1,s=function(){function t(t,e,i,s,n,r,h,l){this.MAX_FORCE=1e5,this.KNEE_FOLD_ADJUST=.5,this.LEG_PART_MASS=10,this.BONES_WIDTH=15,this.THIGH_BONE_LENGTH=40,this.SHIN_BONE_LENGTH=30,this.FOOT_BONE_LENGTH=20,this.TOE_BONE_LENGTH=10,this.LEG_JOINT_STIFFNESS=2e4,this.LEG_JOINT_RELAXATION=3,this.frontBack=h,this.leftRight=l;var c="front"==h;this.thighBone=new Phaser.Sprite(t,s,n+this.THIGH_BONE_LENGTH/2,i.catName+"cat_"+l+"_"+h+"_thigh",1),this.shinBone=new Phaser.Sprite(t,this.thighBone.x,this.thighBone.y+this.thighBone.height/2,i.catName+"cat_"+l+"_"+h+"_shin",1),c?this.toeBone=new Phaser.Sprite(t,this.shinBone.x,this.shinBone.y+this.shinBone.height/2,i.catName+"cat_"+l+"_"+h+"_toe",1):(this.footBone=new Phaser.Sprite(t,this.shinBone.x,this.shinBone.y+this.shinBone.height/2,i.catName+"cat_"+l+"_"+h+"_foot",1),this.toeBone=new Phaser.Sprite(t,this.footBone.x,this.footBone.y+this.footBone.height/2,i.catName+"cat_"+l+"_"+h+"_toe",1)),i.getSpriteGroup().add(this.thighBone),i.getSpriteGroup().add(this.shinBone),c||i.getSpriteGroup().add(this.footBone),i.getSpriteGroup().add(this.toeBone),t.physics.p2.enable(this.thighBone,o),t.physics.p2.enable(this.shinBone,o),c||t.physics.p2.enable(this.footBone,o),t.physics.p2.enable(this.toeBone,o);var g,p,d=t.physics.p2.createRevoluteConstraint(this.thighBone,[-this.BONES_WIDTH/2,-this.THIGH_BONE_LENGTH/2],r,r.getLegAttachPoint(),this.MAX_FORCE),u=t.physics.p2.createRevoluteConstraint(this.shinBone,[0,-this.SHIN_BONE_LENGTH/2],this.thighBone,[0,this.THIGH_BONE_LENGTH/2],this.MAX_FORCE);c?g=t.physics.p2.createRevoluteConstraint(this.toeBone,[0,-this.TOE_BONE_LENGTH/2],this.shinBone,[0,this.SHIN_BONE_LENGTH/2],this.MAX_FORCE):(g=t.physics.p2.createRevoluteConstraint(this.footBone,[0,-this.FOOT_BONE_LENGTH/2],this.shinBone,[0,this.SHIN_BONE_LENGTH/2],this.MAX_FORCE),p=t.physics.p2.createRevoluteConstraint(this.toeBone,[0,-this.TOE_BONE_LENGTH/2],this.footBone,[0,this.FOOT_BONE_LENGTH/2],this.MAX_FORCE)),this.thighBone.body.setRectangle(this.BONES_WIDTH,this.THIGH_BONE_LENGTH),this.shinBone.body.setRectangle(this.BONES_WIDTH,this.SHIN_BONE_LENGTH),c||this.footBone.body.setRectangle(this.BONES_WIDTH,this.FOOT_BONE_LENGTH),this.toeBone.body.setRectangle(this.BONES_WIDTH,this.TOE_BONE_LENGTH),c?(d.setLimits(-Math.PI/2,Math.PI/2),u.setLimits(3*-Math.PI/4,-Math.PI/6),g.setLimits(0,Math.PI/4)):(d.setLimits(-Math.PI/4,Math.PI/2),u.setLimits(0,3*Math.PI/4),g.setLimits(-Math.PI/4,Math.PI/4),p.setLimits(0,Math.PI/6)),this.thighBone.body.mass=this.LEG_PART_MASS,this.shinBone.body.mass=this.LEG_PART_MASS,c||(this.footBone.body.mass=this.LEG_PART_MASS),this.toeBone.body.mass=this.LEG_PART_MASS,d.setStiffness(this.LEG_JOINT_STIFFNESS),u.setStiffness(this.LEG_JOINT_STIFFNESS),g.setStiffness(this.LEG_JOINT_STIFFNESS),c||p.setStiffness(this.LEG_JOINT_STIFFNESS),d.setRelaxation(this.LEG_JOINT_RELAXATION),u.setRelaxation(this.LEG_JOINT_RELAXATION),g.setRelaxation(this.LEG_JOINT_RELAXATION),c||p.setRelaxation(this.LEG_JOINT_RELAXATION),this.paw=new a.Paw(t,i,e,this.toeBone.x,this.toeBone.y,this.toeBone,0,0)}return t.prototype.loadCat=function(t){this.thighBone.loadTexture(t+"cat_"+this.leftRight+"_"+this.frontBack+"_thigh"),this.shinBone.loadTexture(t+"cat_"+this.leftRight+"_"+this.frontBack+"_shin"),"front"!=this.frontBack?(this.footBone.loadTexture(t+"cat_"+this.leftRight+"_"+this.frontBack+"_foot"),this.toeBone.loadTexture(t+"cat_"+this.leftRight+"_"+this.frontBack+"_toe")):this.toeBone.loadTexture(t+"cat_"+this.leftRight+"_"+this.frontBack+"_toe")},t.prototype.setCollisionGroup=function(t){this.thighBone.body.setCollisionGroup(t),this.shinBone.body.setCollisionGroup(t),"back"==this.frontBack&&this.footBone.body.setCollisionGroup(t),this.toeBone.body.setCollisionGroup(t)},t.prototype.collides=function(t){this.thighBone.body.collides(t),this.shinBone.body.collides(t),"back"==this.frontBack&&this.footBone.body.collides(t),this.toeBone.body.collides(t)},t.prototype.setZIndex=function(t){this.thighBone.z=t[this.leftRight],this.shinBone.z=t[this.leftRight],"back"==this.frontBack&&(this.footBone.z=t[this.leftRight]),this.toeBone.z=t[this.leftRight]},t.prototype.getPaw=function(){return this.paw},t.prototype.getFrontBack=function(){return this.frontBack},t.prototype.getHandle=function(){return this.paw.getHandle()},t}();i.CatLeg=s},{"./paw":17}],10:[function(t,e,i){"use strict";var a=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},o=t("./cat"),s=t("./treat"),n=t("./Sensors"),r=t("./ForegroundElement"),h=t("./Element"),l=!1,c=!1,g=function(){function t(t,e,i,a){this.levels=[],this.game=t,this.collisionManager=e,this.soundManager=a,this.cam=new u(this.game,this),this.groupManager=i;for(var o=t.cache.getJSON("levels"),s=0,n=o;s<n.length;s++){var r=n[s];this.levels.push(new _(r))}}return t.prototype.startLevel=function(t){this.game.world.removeAll(!0,!0);var e=this.levels[t];this.cat=new o.Cat(this.game,this.collisionManager,this.groupManager,e.cat_startx,e.cat_starty,100,30),this.activeWorld=new d(this.game,e,this.collisionManager,this.groupManager,this.cam,this.soundManager,this.cat),this.currentLevel=t,e.setBackground(this.activeWorld),e.createTreats(this.activeWorld),this.leftWall=this.game.add.sprite(0,300,"invisible"),this.rightWall=this.game.add.sprite(0,300,"invisible"),this.game.physics.p2.enable(this.leftWall,l),this.game.physics.p2.enable(this.rightWall,l);var i=this.leftWall.body,a=this.rightWall.body;i.setRectangle(10,600),a.setRectangle(10,600),i.setCollisionGroup(this.collisionManager.wallsCollisionGroup),a.setCollisionGroup(this.collisionManager.wallsCollisionGroup),i.collides([this.collisionManager.catCollisionGroup,this.collisionManager.treatCollisionGroup]),a.collides([this.collisionManager.catCollisionGroup,this.collisionManager.treatCollisionGroup]),i["static"]=!0,a["static"]=!0,e.createZones(this.activeWorld),e.createElements(this.activeWorld),e.createForegroundElements(this.activeWorld)},t.prototype.getCat=function(){return this.cat},t.prototype.getActiveWorld=function(){return this.activeWorld},t}();i.LevelManager=g;var p=function(){function t(t,e,i,a,o){this.treats=[],this.zones=[],this.elements=[],this.foregroundElements=[],this.treatToZones={},this.zoneToGoal={},this.level=e,this.game=t,this.collisionManager=i,this.groupManager=a,this.soundManager=o}return t.prototype.getZone=function(t){for(var e=0,i=this.zones;e<i.length;e++){var a=i[e];if(a.zoneKey===t)return a}return null},t}();i.ActiveWorld=p;var d=function(t){function e(e,i,a,o,s,n,r){t.call(this,e,i,a,o,n),this.cam=s,this.cat=r}return a(e,t),e.prototype.onTreat=function(t){var e=this.treatToZones[t];e&&this.getZone(e).setEnabled(!0)},e.prototype.onZoneEnter=function(t){var e=this.zoneToGoal[t];e&&this.cam.change(this.level.stages[e[1]].startX,this.level.stages[e[0]].endX,!1)},e.prototype.onZoneLeave=function(t){var e=this.zoneToGoal[t];e&&this.cat.getX()<=this.level.stages[e[1]].endX&&this.cam.change(this.level.stages[e[1]].startX,this.level.stages[e[1]].endX,!0)},e}(p),u=function(){function t(t,e){this.game=t,this.levelManager=e}return t.prototype.change=function(t,e,i,a){this.levelManager.rightWall.body.x=e,this.levelManager.leftWall.body.x=t;var o=void 0===a?Phaser.Easing.Quadratic.InOut:Phaser.Easing.Linear.None,s=a||500;if(!c)if(i){this.game.camera.follow(null);this.game.add.tween(this.game.camera).to({x:t},s,o).start()}else this.game.camera.follow(this.levelManager.getCat().catBody.chest),this.game.camera.deadzone=new Phaser.Rectangle(200,100,700,600)},t}(),_=function(){function t(t){this.stages=[],this.cat_startx=t.catstart.x+800*(9-t.catstart.level),this.cat_starty=t.catstart.y,this.name=t.name;for(var e=0,i=t.stages;e<i.length;e++){var a=i[e];this.stages.push(new f(a))}}return t.prototype.setBackground=function(t){for(var e=0,i=this.stages;e<i.length;e++){var a=i[e];a.setBackgound(t)}},t.prototype.createTreats=function(t){for(var e=0,i=this.stages;e<i.length;e++){var a=i[e];a.createTreats(t)}for(var o=0,s=t.treats;o<s.length;o++){var n=s[o];n.onCatGotTreat.addOnce(t.onTreat,t)}},t.prototype.createZones=function(t){for(var e=0,i=this.stages;e<i.length;e++){var a=i[e];a.createZones(t)}for(var o=0,s=t.zones;o<s.length;o++){var n=s[o];n.onCatEntered.add(t.onZoneEnter,t),n.onCatLeft.add(t.onZoneLeave,t)}},t.prototype.createElements=function(t){for(var e=0,i=this.stages;e<i.length;e++){var a=i[e];a.createElements(t)}for(var o=0,s=t.elements;o<s.length;o++){var n=s[o];t.groupManager.elementGroup.add(n)}},t.prototype.createForegroundElements=function(t){for(var e=0,i=this.stages;e<i.length;e++){var a=i[e];a.createForegroundElements(t)}for(var o=0,s=t.foregroundElements;o<s.length;o++){var n=s[o];t.groupManager.elementGroup.add(n)}},t}(),f=function(){function t(t){if(this.treats=[],this.zones=[],this.toys=[],this.elements=[],this.foregroundElements=[],this.name=t.name,this.startX=800*(9-t.number),this.endX=800*(10-t.number),this.backgroundImage=t.backgroundImage,t.treats)for(var e=0,i=t.treats;e<i.length;e++){var a=i[e];this.treats.push(new b(a,this.startX))}if(t.zones)for(var o=0,s=t.zones;o<s.length;o++){var n=s[o];this.zones.push(m.factory(n,this.startX,t.number))}if(t.toys)for(var r=0,h=t.toys;r<h.length;r++){var l=h[r];this.toys.push(new w(l))}if(t.elements)for(var c=0,g=t.elements;c<g.length;c++){var p=g[c];this.elements.push(new S(p,this.startX))}if(t.foregroundElements)for(var d=0,u=t.foregroundElements;d<u.length;d++){var _=u[d];this.foregroundElements.push(new E(_,this.startX))}}return t.prototype.setBackgound=function(t){t.game.add.sprite(this.startX,0,this.backgroundImage)},t.prototype.createTreats=function(t){for(var e=0,i=this.treats;e<i.length;e++){var a=i[e];a.init(t)}},t.prototype.createZones=function(t){for(var e=0,i=this.zones;e<i.length;e++){var a=i[e];a.init(t)}},t.prototype.createToys=function(t){for(var e=0,i=this.toys;e<i.length;e++){var a=i[e];a.init(t)}},t.prototype.createElements=function(t){for(var e=0,i=this.elements;e<i.length;e++){var a=i[e];a.init(t)}},t.prototype.createForegroundElements=function(t){for(var e=0,i=this.foregroundElements;e<i.length;e++){var a=i[e];a.init(t)}},t}(),y=function(){function t(){}return t.prototype.init=function(t){},t}(),b=function(t){function e(e,i){t.call(this),this.x=e.x+i,this.y=e.y,this.enable_zone_key=e.enable_zone||null,this.key=e.key}return a(e,t),e.prototype.init=function(t){t.treats.push(new s.Treat(this.key,t.game,t.collisionManager,t.soundManager,this.x,this.y)),this.enable_zone_key&&(t.treatToZones[this.key]=this.enable_zone_key)},e}(y),m=function(){function t(){}return t.factory=function(t,e,i){var a=-1,o=-1;return t.goal&&(a=i+1,o=i),"circle"===t.shape?new C(t.key,t.x+e,t.y,t.radius,t.enabled,o,a):new k(t.key,t.x1+e,t.x2+e,t.y1,t.y2,t.enabled,o,a)},t}(),v=function(t){function e(e,i,a){t.call(this),this.frm=i,this.to=a,this.key=e}return a(e,t),e.prototype.init=function(t){this.frm>=0&&this.to>=0&&(t.zoneToGoal[this.key]=[this.frm,this.to])},e}(y),k=function(t){function e(e,i,a,o,s,n,r,h){t.call(this,e,r,h),this.x1=i,this.x2=a,this.y1=o,this.y2=s,this.enabled=n}return a(e,t),e.prototype.init=function(e){t.prototype.init.call(this,e);var i=new n.ZoneSensor(this.key,e.game,e.collisionManager,this.enabled);i.asRectangle(this.x1,this.y1,this.x2,this.y2),e.zones.push(i)},e}(v),C=function(t){function e(e,i,a,o,s,n,r){t.call(this,e,n,r),this.x=i,this.y=a,this.radius=o,this.enabled=s}return a(e,t),e.prototype.init=function(e){t.prototype.init.call(this,e);var i=new n.ZoneSensor(this.key,e.game,e.collisionManager,this.enabled);i.asCircle(this.x,this.y,this.radius),e.zones.push(i)},e}(v),w=function(t){function e(e){t.call(this),this.x=e.x,this.y=e.y,this.type=e.type,this.key=e.key}return a(e,t),e.prototype.getX=function(){return this.x},e.prototype.getY=function(){return this.y},e.prototype.getType=function(){return this.type},e.prototype.init=function(t){},e}(y),S=function(t){function e(e,i){t.call(this),this.key=e.key,this.x=e.x+i,this.y=e.y}return a(e,t),e.prototype.init=function(t){t.elements.push(new h.Element(t.game,this.x,this.y,this.key,t))},e}(y),E=function(t){function e(e,i){t.call(this),this.key=e.key,this.x=e.x+i,this.y=e.y}return a(e,t),e.prototype.init=function(t){t.foregroundElements.push(new r.ForegroundElement(t.game,this.x,this.y,this.key,t))},e}(y)},{"./Element":4,"./ForegroundElement":6,"./Sensors":11,"./cat":16,"./treat":18}],11:[function(t,e,i){"use strict";var a=!1,o=!1,s=function(){function t(t,e,i,s,n,r,h){void 0===n&&(n=0),void 0===r&&(r=0),void 0===h&&(h=null),this.entries=0,this.onCatEntered=new Phaser.Signal,this.onCatLeft=new Phaser.Signal,this.zoneKey=t,this.game=e,this.myCollisions=i,this.sprite=e.add.sprite(n,r,o?"sensor":"invisible"),this.enabled=s,this.game.physics.p2.enable(this.sprite,a),null!=h&&this.setShape(h),this.sprite.body["static"]=!0,this.sprite.body.onBeginContact.add(this.catContacted,this,0),this.sprite.body.onEndContact.add(this.catUnContacted,this,0)}return t.prototype.setEnabled=function(t){this.enabled=t,this.entries>0&&this.onCatEntered.dispatch(this.zoneKey,null,null,null)},t.prototype.setShape=function(t){this.sprite.body.clearShapes(),t.sensor=!0,this.sprite.body.addShape(t.sensor),this.sprite.body.setCollisionGroup(this.myCollisions.sensorCollisionGroup),this.sprite.body.collides([this.myCollisions.catCollisionGroup,this.myCollisions.pawCollisionGroup])},t.prototype.setCenter=function(t,e){this.sprite.body.x=t,this.sprite.body.y=e},t.prototype.asCircle=function(t,e,i){this.setCenter(t,e),this.sprite.body.clearShapes(),this.sprite.body.setCircle(i),this.sprite.body.data.shapes[0].sensor=!0,this.sprite.body.setCollisionGroup(this.myCollisions.sensorCollisionGroup),this.sprite.body.collides([this.myCollisions.catCollisionGroup,this.myCollisions.pawCollisionGroup])},t.prototype.asRectangle=function(t,e,i,a){var o=i-t,s=a-e;this.setCenter(t+.5*o,e+.5*s),this.sprite.body.clearShapes(),this.sprite.body.setRectangle(o,s),this.sprite.body.data.shapes[0].sensor=!0,this.sprite.body.setCollisionGroup(this.myCollisions.sensorCollisionGroup),this.sprite.body.collides([this.myCollisions.catCollisionGroup,this.myCollisions.pawCollisionGroup])},t.prototype.catContacted=function(t,e,i,a){null!=t&&(0==this.entries&&this.enabled&&this.onCatEntered.dispatch(this.zoneKey,t,e,i),this.entries++)},t.prototype.catUnContacted=function(t,e,i,a){null!=t&&(--this.entries,0==this.entries&&this.enabled&&this.onCatLeft.dispatch(this.zoneKey,t,e,i))},t}();i.ZoneSensor=s},{}],12:[function(t,e,i){"use strict";var a=function(){function t(t){this.sounds={},this.game=t}return t.prototype.addSound=function(t){this.sounds[t]=this.game.add.audio(t,1,!1)},t.prototype.playSound=function(t){var e=this.sounds[t];null!==e&&e.play("",0,1,!1,!0)},t}();i.SoundManager=a},{}],13:[function(t,e,i){"use strict";var a=!1,o=function(){function t(t,e,i,o,s){this.JOINT_MASS=5,this.MAX_FORCE=1e5,this.jointCount=8,this.jointLength=15,this.jointWidth=7,this.tailFlexMin=0,this.tailFlexMax=Math.PI/4,this.tailJoints=[],i+=s.getTailAttachPoint()[0],o+=s.getTailAttachPoint()[1];var n=new Phaser.Sprite(t,i+.5*this.jointLength,o,e.catName+"cat_tail_0",1);e.getSpriteGroup().add(n),t.physics.p2.enable(n,a),n.body.setRectangle(this.jointLength,this.jointWidth),n.body.mass=this.JOINT_MASS;var r=t.physics.p2.createRevoluteConstraint(n,[.5*this.jointLength,.5*this.jointWidth],s,s.getTailAttachPoint(),this.MAX_FORCE);r.setLimits(0,0),this.tailJoints.push(n);for(var h=1;h<this.jointCount;++h){i-=this.jointLength;var l=this.tailJoints[h-1];n=new Phaser.Sprite(t,i+.5*this.jointLength,o+.5*this.jointWidth,e.catName+"cat_tail_"+h,1),e.getSpriteGroup().add(n),t.physics.p2.enable(n,a);var c=t.physics.p2.createRevoluteConstraint(n,[.5*-this.jointLength,0],l,[.5*this.jointLength,0],this.MAX_FORCE);n.body.setRectangle(this.jointLength,this.jointWidth),n.body.mass=this.JOINT_MASS,c.setLimits(this.tailFlexMin,this.tailFlexMax),this.tailJoints.push(n)}}return t.prototype.loadCat=function(t){for(var e=0;e<this.tailJoints.length;++e)this.tailJoints[e].loadTexture(t+"cat_tail_"+e)},t.prototype.setZIndex=function(t){this.tailJoints.forEach(function(e,i){e.z=t+(1-i/10)-1})},t.prototype.setCollisionGroup=function(t){for(var e=0;e<this.tailJoints.length;++e)this.tailJoints[e].body.setCollisionGroup(t)},t.prototype.collides=function(t){for(var e=0;e<this.tailJoints.length;++e)this.tailJoints[e].body.collides(t)},t}();i.CatTail=o},{}],14:[function(t,e,i){"use strict";var a=!1,o=function(){function t(t,e,i,o,s,n,r,h,l){void 0===r&&(r="fish_treat"),void 0===h&&(h=!0),void 0===l&&(l=14),this.treatRadius=14,this.TREAT_MASS=15,this.edible=!0,this.onCatGotTreat=new Phaser.Signal,this.treatID=t,this.game=e,this.myCollisions=i,this.edible=h,this.treatRadius=l,this.soundManager=o,this.sprite=e.add.sprite(s,n,r),this.game.physics.p2.enable(this.sprite,a),this.sprite.body.mass=this.TREAT_MASS,this.sprite.body.setRectangle(49,23),this.sprite.body.setCollisionGroup(i.treatCollisionGroup),this.sprite.body.collides([i.catCollisionGroup,i.elementsCollisionGroup,i.wallsCollisionGroup],this.catCollided,this)}return t.prototype.catCollided=function(t,e,i,a){e.sprite.key.indexOf("cat_head")>=0&&(this.onCatGotTreat.dispatch(this.treatID,t,e,i,a),this.soundManager.playSound("meow"),this.sprite.destroy())},t}();i.Treat=o},{}],15:[function(t,e,i){"use strict";function a(t){if(this.splash)return this.splash.destroy(),this.splash=null,void this.levelManager.cam.change(7200,8e3,!0,6e3);var e=this.game.physics.p2.hitTest(this.mouseBody.body,this.handle_bodies);e.length&&null!=this.levelManager.cat&&(this.levelManager.cat.anyPawsTouchy()||C)&&("paw"in e[0].parent&&(this.trackingBody=e[0].parent,e[0].parent.paw.beginDrag(!0)),this.mouseSpring=this.game.physics.p2.createSpring(this.mouseBody,e[0],0,500,1))}function o(){this.game.physics.p2.removeSpring(this.mouseSpring),null!=this.trackingBody&&this.trackingBody.paw.endDrag(!0),this.trackingBody=null}function s(t,e,i,a){null==this.levelManager.cat||this.levelManager.cat.anyPawsTouchy()||C?(this.mouseBody.body.x=e+this.game.camera.x,this.mouseBody.body.y=i+this.game.camera.y,null!=this.trackingBody&&(this.trackingBody["static"]=!1,this.trackingBody.dynamic=!0)):(this.game.physics.p2.removeSpring(this.mouseSpring),null!=this.trackingBody&&this.trackingBody.paw.endDrag(!0),this.trackingBody=null)}function n(){C=!0,null!=this.levelManager.cat&&(this.levelManager.cat.enablePaws("front",!0),
this.levelManager.cat.enablePaws("back",!0))}function r(){null!=this.levelManager.cat&&"back"!=this.pawLock&&(this.levelManager.cat.enablePaws("front",!0),this.pawLock="front")}function h(){null!=this.levelManager.cat&&"front"==this.pawLock&&(this.levelManager.cat.enablePaws("front",!1),this.pawLock=null)}function l(){null!=this.levelManager.cat&&"front"!=this.pawLock&&(this.levelManager.cat.enablePaws("back",!0),this.pawLock="back")}function c(){null!=this.levelManager.cat&&"back"==this.pawLock&&(this.levelManager.cat.enablePaws("back",!1),this.pawLock=null)}var g=t("./GroupManager"),p=t("./CollisionManager"),d=t("./CatSpriteManager"),u=t("./LevelManager"),_=t("./Treat"),f=t("./Sensors"),y=t("./Fishy"),b=t("./SoundManager"),m=!1,v=!1,k=!1,C=!1,w=function(){function t(){this.pawLock=null,this.game=new Phaser.Game(m?8e3:800,600,Phaser.CANVAS,"content",{preload:this.preload,create:this.create,update:this.update})}return t.prototype.preload=function(){this.game.load.physics("physics","cat-physics.json"),this.game.load.image("invisible","invisible.png"),this.game.load.json("levels","levels.json"),this.game.load.image("cat_paw","cat-paw.png"),this.game.load.image("cat_paw_red","cat-paw-red.png"),this.game.load.image("cat_paw_blue","cat-paw-blue.png"),this.game.load.image("cat_paw_green","cat-paw-green.png"),this.game.load.image("cat_paw_black","cat-paw-black.png"),this.game.load.image("fishy","fish.png"),this.catSpriteManager=new d.CatSpriteManager(this.game),this.catSpriteManager.loadSpritesForCat("brown"),this.catSpriteManager.loadSpritesForCat("orange"),this.catSpriteManager.loadSpritesForCat("fat"),this.catSpriteManager.loadSpritesForCat("calico"),this.catSpriteManager.loadSpritesForCat("black"),this.catSpriteManager.loadSpritesForCat("hairless"),this.game.load.image("title","floppy-cat-title.png"),this.game.load.image("credits","credits.png"),this.game.load.image("fish_treat","fish_treat.png"),this.game.load.image("debug_wall","debug_wall.png"),this.game.load.image("start_background","levels/start/start_background_mona_inst.png"),this.game.load.image("start_sprite_floor","levels/start/start_sprite_floor.png"),this.game.load.image("start_sprite_bed","levels/start/start_sprite_bed.png"),this.game.load.image("start_sprite_curtains","levels/start/start_sprite_curtains.png"),this.game.load.image("box_background","levels/box/box_background.png"),this.game.load.image("box_foreground_box","levels/box/box_foreground_box.png"),this.game.load.image("box_sprite_box_and_ground","levels/box/box_sprite_box_and_ground.png"),this.game.load.image("post_background","levels/post/post_background.png"),this.game.load.image("post_sprites","levels/post/post_sprites.png"),this.game.load.image("vase_background","levels/vase/vase_background.png"),this.game.load.image("vase_foreground","levels/vase/vase_foreground.png"),this.game.load.image("vase_sprites","levels/vase/vase_sprites.png"),this.game.load.image("boot_background","levels/boot/boot_background.png"),this.game.load.image("boot_foreground","levels/boot/boot_foreground.png"),this.game.load.image("boot_sprites","levels/boot/boot_sprites.png"),this.game.load.image("bar_background","levels/bar/bar_background.png"),this.game.load.image("bar_foreground","levels/bar/bar_foreground.png"),this.game.load.image("bar_sprites_stools","levels/bar/bar_sprites_stools.png"),this.game.load.image("bar_sprites_drinks","levels/bar/bar_sprites_drinks.png"),this.game.load.image("outdoor_1_background","levels/outdoor_1/outdoor_1_background.png"),this.game.load.image("outdoor_1_foreground_window","levels/outdoor_1/outdoor_1_foreground_window.png"),this.game.load.image("outdoor_1_sprites_main","levels/outdoor_1/outdoor_1_sprites_main.png"),this.game.load.image("outdoor_1_sprites_window_top","levels/outdoor_1/outdoor_1_sprites_window_top.png"),this.game.load.image("outdoor_2_background","levels/outdoor_2/outdoor_2_background.png"),this.game.load.image("outdoor_2_sprites_main","levels/outdoor_2/outdoor_2_sprites_main.png"),this.game.load.image("outdoor_2_foreground_trash","levels/outdoor_2/outdoor_2_foreground_trash.png"),this.game.load.image("outdoor_3_background","levels/outdoor_3/outdoor_3_background_lunch.png"),this.game.load.image("outdoor_3_sprites_main","levels/outdoor_3/outdoor_3_sprites_main.png"),this.game.load.image("outdoor_3_sprites_window_top","levels/outdoor_3/outdoor_3_sprites_window_top.png"),this.game.load.image("outdoor_3_foreground_window","levels/outdoor_3/outdoor_3_foreground_window.png"),this.game.load.image("fish_sprite_table_and_bowl","levels/fish/fish_sprite_table_and_bowl.png"),this.game.load.image("fish_background","levels/fish/fish_background.png"),this.game.load.image("fish_foreground_water","levels/fish/fish_foreground_water.png"),this.game.load.audio("music","audio/Heavy-Thoughts-Ludum-Dare-Edit.mp3"),this.game.load.audio("meow","audio/Cat-meow-1.mp3")},t.prototype.create=function(){var t=8e3,e=600;this.game.physics.startSystem(Phaser.Physics.P2JS),this.game.physics.p2.setImpactEvents(!0),this.game.physics.p2.gravity.y=200,this.game.physics.p2.setBounds(0,0,800,600,!0,!0,!0,!0,!0),this.game.world.setBounds(0,0,t,e),this.game.camera.setBoundsToWorld(),this.game.add.sound("music",1,!0).play(),this.collisions=new p.CollisionManager(this.game),this.soundManager=new b.SoundManager(this.game),this.soundManager.addSound("meow");var i=new _.Treat("my_treat",this.game,this.collisions,this.soundManager,600,500);i.onCatGotTreat.add(function(t){console.log("You got the "+t+" treat!!")});var d=new f.ZoneSensor("my_zone",this.game,this.collisions,!0);d.asRectangle(0,400,800,500),d.onCatEntered.add(function(t){alert("The cat has entered zone "+t)}),d.onCatLeft.add(function(t){alert("The cat has left zone "+t)}),d.onCatEntered.add(function(t){console.log("The cat has entered zone "+t),d.setEnabled(!1)}),d.onCatLeft.add(function(t){console.log("The cat has left zone "+t)}),this.groupManager=new g.GroupManager(this.game),this.levelManager=new u.LevelManager(this.game,this.collisions,this.groupManager,this.soundManager),this.levelManager.startLevel(0),this.fishy=new y.Fishy(this.game,this.collisions,350,250,450,270,20),this.fishy.onEaten.add(function(){this.game.add.sprite(0,0,"credits")},this),this.mouseBody=this.game.add.sprite(100,100,"invisible"),this.game.physics.p2.enable(this.mouseBody,v),this.mouseBody.body["static"]=!0,this.mouseBody.body.setCircle(10),this.mouseBody.body.data.shapes[0].sensor=!0,this.handle_bodies=this.levelManager.getCat().getHandles(),this.game.input.onDown.add(a,this),this.game.input.onUp.add(o,this),this.game.input.addMoveCallback(s,this);var m=this.game.input.keyboard.addKey(Phaser.Keyboard.Z),C=this.game.input.keyboard.addKey(Phaser.Keyboard.X);if(k){var w=this.game.input.keyboard.addKey(Phaser.Keyboard.L);w.onDown.add(n,this)}m.onDown.add(r,this),m.onUp.add(h,this),C.onDown.add(l,this),C.onUp.add(c,this);var S=this.game.input.keyboard.addKey(Phaser.Keyboard.ONE),E=this.game.input.keyboard.addKey(Phaser.Keyboard.TWO),T=this.game.input.keyboard.addKey(Phaser.Keyboard.THREE),B=this.game.input.keyboard.addKey(Phaser.Keyboard.FOUR),M=this.game.input.keyboard.addKey(Phaser.Keyboard.FIVE),G=this.game.input.keyboard.addKey(Phaser.Keyboard.SIX);S.onDown.add(function(){null!=this.levelManager.cat&&this.levelManager.cat.loadCat("brown/")},this),E.onDown.add(function(){null!=this.levelManager.cat&&this.levelManager.cat.loadCat("orange/")},this),T.onDown.add(function(){null!=this.levelManager.cat&&this.levelManager.cat.loadCat("fat/")},this),B.onDown.add(function(){null!=this.levelManager.cat&&this.levelManager.cat.loadCat("calico/")},this),M.onDown.add(function(){null!=this.levelManager.cat&&this.levelManager.cat.loadCat("black/")},this),G.onDown.add(function(){null!=this.levelManager.cat&&this.levelManager.cat.loadCat("hairless/")},this),this.groupManager.getAllGroups().forEach(function(t){this.game.add.existing(t)},this),this.splash=new Phaser.Sprite(this.game,35,200,"title"),this.splash.fixedToCamera=!0,this.game.add.existing(this.splash)},t.prototype.update=function(){this.mouseBody.body.x=this.game.input.x+this.game.camera.x,this.mouseBody.body.y=this.game.input.y+this.game.camera.y},t}();window.onload=function(){new w}},{"./CatSpriteManager":2,"./CollisionManager":3,"./Fishy":5,"./GroupManager":7,"./LevelManager":10,"./Sensors":11,"./SoundManager":12,"./Treat":14}],16:[function(t,e,i){"use strict";var a=t("./Tail"),o=t("./Head"),s=t("./Leg"),n=t("./Body"),r=function(){function t(t,e,i,r,h,l,c){this.catName="brown/",this.legs=[],this.game=t,this.spriteGroup=i.catGroup,this.catBody=new n.CatBody(t,this,e,r,h);for(var g=[{x:r+l/2,y:h+c/2,attach:this.catBody.chest,isFrontLeg:!0,leftRight:"left",frontBack:"front"},{x:r+l/2,y:h+c/2,attach:this.catBody.chest,isFrontLeg:!0,leftRight:"right",frontBack:"front"},{x:r+-l/2,y:h+c/2,attach:this.catBody.butt,isFrontLeg:!1,leftRight:"left",frontBack:"back"},{x:r+-l/2,y:h+c/2,attach:this.catBody.butt,isFrontLeg:!1,leftRight:"right",frontBack:"back"}],p=0;p<g.length;p++){var d=new s.CatLeg(this.game,e,this,g[p].x,g[p].y,g[p].attach,g[p].frontBack,g[p].leftRight);d.setCollisionGroup(e.catCollisionGroup),d.collides(e.catCollidesWith),this.legs.push(d)}this.tail=new a.CatTail(this.game,this,r-l/2,h-c/2,this.catBody.butt),this.tail.setCollisionGroup(e.catCollisionGroup),this.tail.collides(e.catCollidesWith),this.head=new o.CatHead(this.game,this,r-l/2,h-c/2,this.catBody.chest),this.head.setCollisionGroup(e.catCollisionGroup),this.head.collides(e.catCollidesWith),this.sortSprites()}return t.prototype.loadCat=function(t){this.catName=t,this.catBody.loadCat(t),this.legs.forEach(function(e){e.loadCat(t)}),this.tail.loadCat(t),this.head.loadCat(t)},t.prototype.sortSprites=function(){this.legs.forEach(function(t){t.setZIndex({left:9,right:5}),t.getPaw().setZIndex(10)}),this.catBody.setZIndex(7),this.tail.setZIndex(6),this.head.setZIndex(8),this.getSpriteGroup().sort("z",Phaser.Group.SORT_ASCENDING)},t.prototype.getX=function(){return this.catBody.belly.x},t.prototype.getY=function(){return this.catBody.belly.y},t.prototype.getHead=function(){return this.head},t.prototype.enablePaws=function(t,e){this.legs.forEach(function(i){i.getFrontBack()==t&&(e?i.getPaw().beginDrag():i.getPaw().endDrag())})},t.prototype.anyPawsTouchy=function(){var t=!1;return this.legs.forEach(function(e){return e.getPaw().isTouchy()?void(t=!0):void 0}),t},t.prototype.getHandles=function(){return this.legs.map(function(t){return t.getHandle()})},t.prototype.getSpriteGroup=function(){return this.spriteGroup},t}();i.Cat=r},{"./Body":1,"./Head":8,"./Leg":9,"./Tail":13}],17:[function(t,e,i){"use strict";var a=!1,o=function(){function t(t,e,i,o,s,n,r,h){this.MAX_FORCE=2e4,this.inContact=!1,this.hasMouse=!1,this.dragCount=0,this.game=t,this.sprite=new Phaser.Sprite(t,o,s,"cat_paw_blue"),e.getSpriteGroup().add(this.sprite),this.myCollisions=i,this.game.physics.p2.enable(this.sprite,a),this.sprite.body.setCollisionGroup(i.catCollisionGroup),this.sprite.body.collides(i.elementsCollisionGroup),this.sprite.body.onBeginContact.add(this.contactBegan,this,0),this.sprite.body.onEndContact.add(this.contactEnded,this,0),this.sprite.body.paw=this,t.physics.p2.createRevoluteConstraint(this.sprite,[0,0],n,[r,h],this.MAX_FORCE)}return t.prototype.stick=function(){this.sprite.body["static"]=!0,this.sprite.body.velocity.x=0,this.sprite.body.velocity.y=0,this.sprite.body.angularVelocity=0,this.sprite.loadTexture("cat_paw_black")},t.prototype.unstick=function(){this.sprite.loadTexture("cat_paw_blue"),this.sprite.body["static"]=!1,this.sprite.body.dynamic=!0},t.prototype.beginDrag=function(t){void 0===t&&(t=!1),this.dragCount++,this.unstick(),t&&(this.hasMouse=!0),this.sprite.loadTexture(this.hasMouse?"cat_paw_green":"cat_paw_red")},t.prototype.endDrag=function(t){void 0===t&&(t=!1),this.dragCount--,this.inContact?this.stick():(t&&(this.hasMouse=!1),this.dragCount>0?this.sprite.loadTexture(this.hasMouse?"cat_paw_green":"cat_paw_red"):this.isTouchy()?this.sprite.loadTexture("cat_paw_black"):this.sprite.loadTexture("cat_paw_blue"))},t.prototype.contactBegan=function(t,e,i,a){null!=t&&(this.inContact=!0,this.dragCount<=0&&this.stick())},t.prototype.contactEnded=function(t,e,i,a){null!=t&&(this.inContact=!1)},t.prototype.isTouchy=function(){return this.inContact||this.sprite.body["static"]},t.prototype.getHandle=function(){return this.sprite.body},t.prototype.getSprite=function(){return this.sprite},t.prototype.setZIndex=function(t){this.sprite.z=t},t.prototype.getX=function(){return this.sprite.x},t.prototype.getY=function(){return this.sprite.y},t.prototype.setForceAngle=function(t){this.sprite.body.force.x=100*Math.sin(t),this.sprite.body.force.y=100*Math.cos(t)},t}();i.Paw=o},{}],18:[function(t,e,i){arguments[4][14][0].apply(i,arguments)},{dup:14}]},{},[15])(15)});
//# sourceMappingURL=ludumdare.min.js.map
